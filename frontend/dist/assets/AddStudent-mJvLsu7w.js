import{r as s,j as t,b as m,B as u}from"./index-B7OZzBRK.js";import{C as $}from"./Toast-C-pLTZpU.js";import{M as B}from"./Modal-BBnWcCLm.js";import{A as N}from"./AddUserTable-KLRaQ4l1.js";import"./Table-C0LzT_QR.js";import"./ThemeProvider-mjo_KbZQ.js";import"./TablePlaceholder-CtzLlF3u.js";import"./index-DNKZOxsO.js";import"./warning-KWRHVkjh.js";import"./TransitionWrapper-qWTe5h-w.js";import"./useEventCallback-DsMNjBTY.js";import"./Placeholder-DGZdzl_d.js";import"./Col-DXoX1HGj.js";import"./Button-5FLJvNMB.js";import"./Button-DQAcu0VB.js";function P(){const[x,S]=s.useState([]),[w,j]=s.useState(!0),[b,r]=s.useState(!1),[D,n]=s.useState(""),[p,l]=s.useState(!1),[d,h]=s.useState(null),i=async()=>{try{const e=await m.get(`${u}/admin/student-users`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});e.data?S(e.data.studentUsers):console.warn("Response does not contain studentUsers:",e.data)}catch(e){console.error("Error fetching user details",e)}finally{j(!1)}};s.useEffect(()=>{i()},[]);const[y,A]=s.useState(!1),[c,M]=s.useState({first_name:"",email:"",number:"",password:""}),U=e=>M({...c,[e.target.name]:e.target.value}),v=e=>{h(e),l(!0)},f=async()=>{var e,a;try{const o=await m.post(`${u}/admin/student-delete-user`,{email:d},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});o.data&&(n(o.data.msg),r(!0),i())}catch(o){console.log("student => confirmDelete ==> ",o),n((a=(e=o==null?void 0:o.response)==null?void 0:e.data)==null?void 0:a.msg),r(!0)}l(!1)},g=()=>{l(!1),h(null)},T=async e=>{e.preventDefault();try{const a=await m.post(`${u}/admin/student-add-user`,c,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a.data&&(n(a.data.msg),r(!0),i())}catch(a){console.log("handleSubmit => Mangement.jsx ==> ",a)}};return t.jsxs(t.Fragment,{children:[t.jsx($,{show:b,onClose:()=>r(!1),message:D,delay:3e3,position:"bottom-end"}),t.jsx("div",{className:"bg-gradient-to-r from-slate-600 via-purple-600 to-slate-700 text-white rounded-xl shadow-lg p-6 mb-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-full",children:t.jsx("i",{className:"fa-solid fa-user-graduate text-3xl"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Student Users"}),t.jsx("p",{className:"text-slate-100 text-sm mt-1",children:"Manage all student accounts"})]})]})}),t.jsx(N,{users:x,loading:w,handleDeleteUser:v,formOpen:y,setFormOpen:A,data:c,handleDataChange:U,handleSubmit:T,showModal:p,closeModal:g,confirmDelete:f,userToDelete:d,userToAdd:"Student",handleApproveStudent:null}),t.jsx(B,{show:p,close:g,header:"Confirmation",body:`Do you want to delete ${d}?`,btn:"Delete",confirmAction:f})]})}export{P as default};
