import{u as I,r as n,d as $,j as e,b as N,B as m}from"./index-B3aSgIEu.js";import{a as l,F as c}from"./Form-D7tsfd2t.js";import{C as P}from"./Toast-DNXJp6MA.js";import{M as T}from"./Modal-y_Bwdyn3.js";import"./ThemeProvider-COntGE-K.js";import"./index-_BQgUFlf.js";import"./warning-Bnkvw9rZ.js";import"./Col-Cd-x-5D5.js";function _(){document.title="CPMS | Add Company";const d=I(),[v,p]=n.useState(!0),[x,h]=n.useState(""),{companyId:o}=$(),[w,y]=n.useState(!1),[D,f]=n.useState(""),[S,r]=n.useState(!1),[a,g]=n.useState(),F=()=>{r(!1)},L=t=>{if(t.preventDefault(),!(a!=null&&a.companyName)||!(a!=null&&a.companyDescription)||!(a!=null&&a.companyDifficulty)||!(a!=null&&a.companyLocation)||!(a!=null&&a.companyWebsite))return h("All Fields Required!");r(!0)},M=async()=>{var u,j,b,C;const t=o?`${m}/company/update-company?companyId=${o}`:`${m}/company/add-company`;try{const s=await N.post(t,a,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if((s==null?void 0:s.status)===201){r(!1),f((u=s==null?void 0:s.data)==null?void 0:u.msg);const E={showToastPass:!0,toastMessagePass:(j=s==null?void 0:s.data)==null?void 0:j.msg};d("../tpo/companys",{state:E})}}catch(s){console.log("AddCompany error while fetching => ",s),r(!1),f((C=(b=s==null?void 0:s.response)==null?void 0:b.data)==null?void 0:C.msg),y(!0)}},A=async()=>{try{const t=await N.get(`${m}/company/company-data?companyId=${o}`);g(t.data.company)}catch(t){console.log("AddCompany error while fetching => ",t)}finally{p(!1)}};n.useEffect(()=>{o&&A()},[o]),n.useEffect(()=>{o||p(!1)},[]);const i=t=>{h(""),g({...a,[t.target.name]:t.target.value})};return e.jsxs(e.Fragment,{children:[e.jsx(P,{show:w,onClose:()=>y(!1),message:D,delay:3e3,position:"bottom-end"}),v?e.jsx("div",{className:"flex justify-center h-72 items-center",children:e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-4xl text-slate-500"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-gradient-to-r from-slate-600 via-slate-500 to-gray-600 text-white rounded-xl shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-full",children:e.jsx("i",{className:"fa-solid fa-building text-3xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:o?"Update Company":"Add New Company"}),e.jsx("p",{className:"text-slate-100 text-sm mt-1",children:"Fill in the company details below"})]})]})}),e.jsxs(l,{onSubmit:L,children:[e.jsxs("div",{className:"my-6 bg-white/95 border-2 border-slate-200 rounded-xl shadow-lg p-8 max-sm:p-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 max-sm:grid-cols-1",children:[e.jsx(c,{controlId:"floatingCompanyName",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Company Name ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(l.Control,{type:"text",placeholder:"Company Name",name:"companyName",value:(a==null?void 0:a.companyName)||"",onChange:i})}),e.jsx(c,{controlId:"floatingCompanyLocation",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Company Location ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(l.Control,{type:"text",placeholder:"Company Location",name:"companyLocation",value:(a==null?void 0:a.companyLocation)||"",onChange:i})})]}),e.jsx(c,{controlId:"floatingCompanyWebsite",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Company Website ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(l.Control,{type:"link",placeholder:"Company Website",name:"companyWebsite",value:(a==null?void 0:a.companyWebsite)||"",onChange:i})}),e.jsx(c,{controlId:"floatingSelectDifficulty",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Difficulty Level ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsxs(l.Select,{"aria-label":"Floating label select difficulty",className:"cursor-pointer",name:"companyDifficulty",value:(a==null?void 0:a.companyDifficulty)||"",onChange:i,children:[e.jsx("option",{disabled:!0,value:"",className:"text-gray-400",children:"Enter Difficulty Level"}),e.jsx("option",{value:"Easy",children:"Easy"}),e.jsx("option",{value:"Moderate",children:"Moderate"}),e.jsx("option",{value:"Hard",children:"Hard"})]})}),e.jsx(c,{controlId:"floatingcompanyDescription",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Company Description ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(l.Control,{as:"textarea",placeholder:"Company Description",name:"companyDescription",style:{height:"100px",maxHeight:"450px"},value:(a==null?void 0:a.companyDescription)||"",onChange:i})})]}),x&&e.jsx("div",{className:"flex pt-2",children:e.jsx("span",{className:"text-red-500",children:x})})]}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[e.jsxs("button",{type:"submit",className:"px-8 py-3 bg-gradient-to-r from-slate-600 to-gray-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all duration-300 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-building"}),o?"Update Company":"Add Company"]}),e.jsxs("button",{type:"button",onClick:()=>d(-1),className:"px-8 py-3 bg-slate-200 text-slate-700 font-semibold rounded-lg shadow hover:bg-slate-300 transition-colors duration-300 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-xmark"}),"Cancel"]})]})]})]}),e.jsx(T,{show:S,close:F,header:"Confirmation",body:`Do you want to add company ${a==null?void 0:a.companyName}?`,btn:"Post",confirmAction:M})]})}export{_ as default};
