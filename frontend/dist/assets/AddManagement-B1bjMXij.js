import{r as s,j as t,b as i,B as d}from"./index-B3aSgIEu.js";import{C as T}from"./Toast-DNXJp6MA.js";import{M as $}from"./Modal-y_Bwdyn3.js";import{A as B}from"./AddUserTable-DEax5Ftq.js";import"./Table-D7p0oCGX.js";import"./ThemeProvider-COntGE-K.js";import"./TablePlaceholder-BPNYtZh7.js";import"./index-_BQgUFlf.js";import"./warning-Bnkvw9rZ.js";import"./TransitionWrapper-Bf0TK5bL.js";import"./useEventCallback-BQ8UfDmj.js";import"./Placeholder-Dt8gjBXH.js";import"./Col-Cd-x-5D5.js";import"./Button-VxBu_kGs.js";import"./Button-DOHxPqx8.js";function J(){document.title="CPMS | Management Users";const[f,x]=s.useState([]),[S,M]=s.useState(!0),[w,o]=s.useState(!1),[j,c]=s.useState(""),[u,n]=s.useState(!1),[r,g]=s.useState(null),l=async()=>{try{const e=await i.get(`${d}/admin/management-users`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});e.data?x(e.data.managementUsers):console.warn("Response does not contain ManagementUsers:",e.data)}catch(e){console.error("Error fetching user details",e)}finally{M(!1)}};s.useEffect(()=>{l()},[]);const[b,D]=s.useState(!1),[m,y]=s.useState({first_name:"",email:"",number:"",password:""}),A=e=>y({...m,[e.target.name]:e.target.value}),U=e=>{g(e),n(!0)},h=async e=>{try{const a=await i.post(`${d}/admin/management-delete-user`,{email:r},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});n(!1),a.data&&(c(a.data.msg),o(!0),l())}catch(a){console.log("Management => confirmDelete ==> ",a)}},p=()=>{n(!1),g(null)},v=async e=>{e.preventDefault();try{const a=await i.post(`${d}/admin/management-add-user`,m,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a.data&&(c(a.data.msg),o(!0),l())}catch(a){console.log("handleSubmit => Mangement.jsx ==> ",a)}};return t.jsxs(t.Fragment,{children:[t.jsx(T,{show:w,onClose:()=>o(!1),message:j,delay:3e3,position:"bottom-end"}),t.jsx("div",{className:"bg-gradient-to-r from-slate-600 via-blue-600 to-slate-700 text-white rounded-xl shadow-lg p-6 mb-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-full",children:t.jsx("i",{className:"fa-solid fa-user-tie text-3xl"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"Management Users"}),t.jsx("p",{className:"text-slate-100 text-sm mt-1",children:"Manage all management admin accounts"})]})]})}),t.jsx(B,{users:f,loading:S,handleDeleteUser:U,formOpen:b,setFormOpen:D,data:m,handleDataChange:A,handleSubmit:v,showModal:u,closeModal:p,confirmDelete:h,userToDelete:r,userToAdd:"Management Admin",handleApproveStudent:null}),t.jsx($,{show:u,close:p,header:"Confirmation",body:`Do you want to delete ${r}?`,btn:"Delete",confirmAction:h})]})}export{J as default};
