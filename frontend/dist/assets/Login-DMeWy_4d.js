import{u as L,a as M,r as a,j as e,L as R,b as T,B as k}from"./index-B3aSgIEu.js";import{C as q}from"./Toast-DNXJp6MA.js";import{i as B}from"./auth.utility-BSlGJMKu.js";import{B as D}from"./Button-VxBu_kGs.js";import"./ThemeProvider-COntGE-K.js";import"./Button-DOHxPqx8.js";function _(){document.title="CPMS | Student Login";const t=L(),y=M(),[p,f]=a.useState(!1),[o,l]=a.useState({}),[j,i]=a.useState(!1),[N,g]=a.useState(""),[d,C]=a.useState({email:"",password:""}),{email:c,password:m}=d,[u,S]=a.useState(!1);a.useEffect(()=>{B()&&t("../student/dashboard")},[t]);const x=r=>{C({...d,[r.target.name]:r.target.value}),r.target.name==="email"&&l({...o,email:""}),r.target.name==="password"&&l({...o,password:""})},v=async r=>{var w,b;if(r.preventDefault(),!c&&!m)return l({email:"Email Required!",password:"Password Required!"});if(!c)return l({email:"Email Required!"});if(!m)return l({password:"Password Required!"});f(!0);try{const s=await T.post(`${k}/student/login`,d);localStorage.setItem("token",s.data.token);const n=s.data.user;n&&(n.isProfileCompleted===!1||n.isProfileCompleted==="false")?t(`../student/complete-profile/${n.id}`):t("../student/dashboard")}catch(s){(b=(w=s==null?void 0:s.response)==null?void 0:w.data)!=null&&b.msg&&(g(s.response.data.msg),i(!0)),console.log("Error in Student login.jsx => ",s),f(!1)}},{showToastPass:h,toastMessagePass:E}=y.state||{showToastPass:!1,toastMessagePass:""};a.useEffect(()=>{h&&(g(E),i(h),t(".",{replace:!0,state:{}}))},[]);const P=()=>S(!u);return e.jsxs(e.Fragment,{children:[e.jsx(q,{show:j,onClose:()=>i(!1),message:N,delay:3e3,position:"bottom-end"}),e.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:e.jsxs("form",{className:"flex flex-col items-center gap-5 bg-white border border-gray-300 rounded-lg p-8 shadow-md w-96 max-w-[90%]",onSubmit:v,children:[e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("img",{src:R,alt:"CPMS Logo",className:"w-32 h-32 rounded-lg shadow-sm"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"Please Log In"})]}),e.jsxs("div",{className:"w-full flex flex-col gap-1",children:[e.jsx("input",{type:"email",name:"email",value:c,onChange:x,placeholder:"Email address",className:"w-full px-4 py-2 rounded border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-100 outline-none",autoComplete:"email"}),o.email&&e.jsx("span",{className:"text-red-500 text-sm ml-1",children:o.email})]}),e.jsxs("div",{className:"w-full flex flex-col gap-1 relative",children:[e.jsx("input",{type:u?"text":"password",name:"password",value:m,onChange:x,placeholder:"Password",className:"w-full px-4 py-2 rounded border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-100 outline-none",autoComplete:"current-password"}),e.jsx("i",{className:`absolute right-3 top-2.5 cursor-pointer text-gray-500 ${u?"fa-solid fa-eye":"fa-regular fa-eye-slash"}`,onClick:P}),o.password&&e.jsx("span",{className:"text-red-500 text-sm ml-1",children:o.password})]}),e.jsx(D,{type:"submit",variant:"primary",className:"w-full py-2",disabled:p,children:p?"Loading...":"Log In"}),e.jsxs("p",{className:"text-sm text-gray-700 text-center",children:["Don't have an account?"," ",e.jsx("span",{className:"text-blue-500 font-medium cursor-pointer hover:underline",onClick:()=>t("../student/signup"),children:"Create new account"})]}),e.jsx("p",{className:"text-xs text-gray-400 text-center mt-4",children:"Â© College Placement Management System 2025 - 26"})]})})]})}export{_ as default};
