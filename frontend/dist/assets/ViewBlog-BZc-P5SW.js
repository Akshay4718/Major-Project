import{d as C,u as E,r as o,b as i,B as c,j as e,c as A}from"./index-B7OZzBRK.js";import{C as I}from"./Toast-C-pLTZpU.js";function z(){var f;const{blogId:n}=C(),g=E(),[s,p]=o.useState(null),[b,j]=o.useState(!0),[l,y]=o.useState(null),[N,d]=o.useState(!1),[w,x]=o.useState(""),[m,h]=o.useState(!1);o.useEffect(()=>{u(),v()},[n]);const v=async()=>{try{const t=localStorage.getItem("token"),a=await i.get(`${c}/user/detail`,{headers:{Authorization:`Bearer ${t}`}});y(a.data)}catch(t){console.error("Error fetching user:",t)}},u=async()=>{var t;try{const a=localStorage.getItem("token"),r=await i.get(`${c}/blog/${n}`,{headers:{Authorization:`Bearer ${a}`}});p(r.data.blog),h((t=r.data.blog.likes)==null?void 0:t.includes(l==null?void 0:l.id))}catch(a){console.error("Error fetching blog:",a)}finally{j(!1)}},k=async()=>{try{const t=localStorage.getItem("token"),a=await i.post(`${c}/blog/${n}/like`,{},{headers:{Authorization:`Bearer ${t}`}});h(a.data.liked),u()}catch(t){console.error("Error liking blog:",t)}},B=async()=>{var t,a;if(window.confirm("Are you sure you want to delete this blog?"))try{const r=localStorage.getItem("token"),$=await i.delete(`${c}/blog/${n}`,{headers:{Authorization:`Bearer ${r}`}});x($.data.msg||"Blog deleted successfully"),d(!0),setTimeout(()=>g("/student/blogs"),1500)}catch(r){console.error("Error deleting blog:",r),x(((a=(t=r.response)==null?void 0:t.data)==null?void 0:a.msg)||"Error deleting blog"),d(!0)}},S=t=>({"Interview Experience":"bg-blue-100 text-blue-700","Resource Sharing":"bg-green-100 text-green-700","Tips & Tricks":"bg-purple-100 text-purple-700","Career Advice":"bg-orange-100 text-orange-700",Other:"bg-gray-100 text-gray-700"})[t]||"bg-gray-100 text-gray-700";return b?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-4xl text-indigo-600"})}):s?e.jsxs(e.Fragment,{children:[e.jsx(I,{show:N,onClose:()=>d(!1),message:w,delay:3e3}),e.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-4xl",children:[e.jsxs("button",{onClick:()=>g("/student/blogs"),className:"text-indigo-600 hover:text-indigo-800 flex items-center gap-2 mb-4",children:[e.jsx("i",{className:"fa-solid fa-arrow-left"}),"Back to Blogs"]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-6",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold mb-3 ${S(s.category).replace("text-","text-white bg-white/20")}`,children:[e.jsx("i",{className:"fa-solid fa-tag"}),s.category]}),e.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:s.title}),s.companyName&&e.jsxs("div",{className:"flex items-center gap-2 text-white/90",children:[e.jsx("i",{className:"fa-solid fa-building"}),e.jsx("span",{className:"font-medium",children:s.companyName})]})]}),(l==null?void 0:l.id)===s.author._id&&e.jsx("button",{onClick:B,className:"p-2 rounded-lg bg-red-500 text-white hover:bg-red-600 transition-all",title:"Delete Blog",children:e.jsx("i",{className:"fa-solid fa-trash-can"})})]})}),e.jsx("div",{className:"px-6 py-4 bg-indigo-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:((f=s.author)==null?void 0:f.profile)||"/default-avatar.png",alt:s.authorName,className:"w-12 h-12 rounded-full object-cover border-2 border-indigo-200"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-800",children:s.authorName}),e.jsx("p",{className:"text-sm text-gray-600",children:new Date(s.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})})]})]}),e.jsxs("button",{onClick:k,className:`flex items-center gap-2 px-4 py-2 rounded-full transition-all font-semibold ${m?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600 hover:bg-red-50 hover:text-red-600"}`,children:[e.jsx("i",{className:`${m?"fa-solid":"fa-regular"} fa-heart text-lg`}),e.jsx("span",{children:s.likesCount||0})]})]})}),e.jsx("div",{className:"px-6 py-6",children:e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-gray-700 text-base leading-relaxed whitespace-pre-wrap",children:s.content})})}),s.tags&&s.tags.length>0&&e.jsx("div",{className:"px-6 py-4 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-sm text-gray-600 font-medium",children:"Tags:"}),s.tags.map((t,a)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-indigo-100 text-indigo-700 rounded-full text-xs font-semibold",children:[e.jsx("i",{className:"fa-solid fa-hashtag text-xs"}),t]},a))]})})]})]})]}):e.jsxs("div",{className:"flex flex-col justify-center items-center min-h-screen",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-6xl text-red-500 mb-4"}),e.jsx("p",{className:"text-xl text-gray-700",children:"Blog not found"}),e.jsx(A,{to:"/student/blogs",className:"mt-4 text-indigo-600 hover:underline",children:"Back to Blogs"})]})}export{z as default};
