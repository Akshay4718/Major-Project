import{r as s,j as t,b as d,B as c}from"./index-B7OZzBRK.js";import{C as O}from"./Toast-C-pLTZpU.js";import{M as P}from"./Modal-BBnWcCLm.js";import{A as v}from"./AddUserTable-KLRaQ4l1.js";import"./Table-C0LzT_QR.js";import"./ThemeProvider-mjo_KbZQ.js";import"./TablePlaceholder-CtzLlF3u.js";import"./index-DNKZOxsO.js";import"./warning-KWRHVkjh.js";import"./TransitionWrapper-qWTe5h-w.js";import"./useEventCallback-DsMNjBTY.js";import"./Placeholder-DGZdzl_d.js";import"./Col-DXoX1HGj.js";import"./Button-5FLJvNMB.js";import"./Button-DQAcu0VB.js";function J(){document.title="CPMS | TPO Users";const[g,x]=s.useState([]),[S,w]=s.useState(!0),[T,o]=s.useState(!1),[j,m]=s.useState(""),[u,r]=s.useState(!1),[n,p]=s.useState(null),l=async()=>{try{const e=await d.get(`${c}/management/tpo-users`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});e.data?x(e.data.tpoUsers):console.warn("Response does not contain tpoUsers:",e.data)}catch(e){console.error("Error fetching user details",e)}finally{w(!1)}};s.useEffect(()=>{l()},[]);const[A,b]=s.useState(!1),[i,D]=s.useState({first_name:"",email:"",number:"",password:""}),y=e=>D({...i,[e.target.name]:e.target.value}),U=e=>{p(e),r(!0)},f=async()=>{try{const e=await d.post(`${c}/management/deletetpo`,{email:n},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});r(!1),e.data&&(m(e.data.msg),o(!0),l())}catch(e){console.log("AddTPO => confirmDelete ==> ",e)}},h=()=>{r(!1),p(null)},M=async e=>{e.preventDefault();try{const a=await d.post(`${c}/management/addtpo`,i,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a.data&&(m(a.data.msg),o(!0),l())}catch(a){console.log("handleSubmit => AddTPO.jsx ==> ",a)}};return t.jsxs(t.Fragment,{children:[t.jsx(O,{show:T,onClose:()=>o(!1),message:j,delay:3e3,position:"top-center"}),t.jsx("div",{className:"bg-gradient-to-r from-slate-600 via-green-600 to-slate-700 text-white rounded-xl shadow-lg p-6 mb-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-full",children:t.jsx("i",{className:"fa-solid fa-user-gear text-3xl"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"TPO Users"}),t.jsx("p",{className:"text-slate-100 text-sm mt-1",children:"Manage all TPO admin accounts"})]})]})}),t.jsx(v,{users:g,loading:S,handleDeleteUser:U,formOpen:A,setFormOpen:b,data:i,handleDataChange:y,handleSubmit:M,showModal:u,closeModal:h,confirmDelete:f,userToDelete:n,userToAdd:"TPO Admin"}),t.jsx(P,{show:u,close:h,header:"Confirmation",body:`Do you want to delete ${n}?`,btn:"Delete",confirmAction:f})]})}export{J as default};
