import{r as s,j as t,b as d,B as c}from"./index-B3aSgIEu.js";import{C as O}from"./Toast-DNXJp6MA.js";import{M as P}from"./Modal-y_Bwdyn3.js";import{A as v}from"./AddUserTable-DEax5Ftq.js";import"./Table-D7p0oCGX.js";import"./ThemeProvider-COntGE-K.js";import"./TablePlaceholder-BPNYtZh7.js";import"./index-_BQgUFlf.js";import"./warning-Bnkvw9rZ.js";import"./TransitionWrapper-Bf0TK5bL.js";import"./useEventCallback-BQ8UfDmj.js";import"./Placeholder-Dt8gjBXH.js";import"./Col-Cd-x-5D5.js";import"./Button-VxBu_kGs.js";import"./Button-DOHxPqx8.js";function J(){document.title="CPMS | TPO Users";const[g,x]=s.useState([]),[S,w]=s.useState(!0),[T,o]=s.useState(!1),[j,m]=s.useState(""),[u,r]=s.useState(!1),[n,p]=s.useState(null),l=async()=>{try{const e=await d.get(`${c}/management/tpo-users`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});e.data?x(e.data.tpoUsers):console.warn("Response does not contain tpoUsers:",e.data)}catch(e){console.error("Error fetching user details",e)}finally{w(!1)}};s.useEffect(()=>{l()},[]);const[A,b]=s.useState(!1),[i,D]=s.useState({first_name:"",email:"",number:"",password:""}),y=e=>D({...i,[e.target.name]:e.target.value}),U=e=>{p(e),r(!0)},f=async()=>{try{const e=await d.post(`${c}/management/deletetpo`,{email:n},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});r(!1),e.data&&(m(e.data.msg),o(!0),l())}catch(e){console.log("AddTPO => confirmDelete ==> ",e)}},h=()=>{r(!1),p(null)},M=async e=>{e.preventDefault();try{const a=await d.post(`${c}/management/addtpo`,i,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a.data&&(m(a.data.msg),o(!0),l())}catch(a){console.log("handleSubmit => AddTPO.jsx ==> ",a)}};return t.jsxs(t.Fragment,{children:[t.jsx(O,{show:T,onClose:()=>o(!1),message:j,delay:3e3,position:"top-center"}),t.jsx("div",{className:"bg-gradient-to-r from-slate-600 via-green-600 to-slate-700 text-white rounded-xl shadow-lg p-6 mb-6",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-3 bg-white/20 rounded-full",children:t.jsx("i",{className:"fa-solid fa-user-gear text-3xl"})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold",children:"TPO Users"}),t.jsx("p",{className:"text-slate-100 text-sm mt-1",children:"Manage all TPO admin accounts"})]})]})}),t.jsx(v,{users:g,loading:S,handleDeleteUser:U,formOpen:A,setFormOpen:b,data:i,handleDataChange:y,handleSubmit:M,showModal:u,closeModal:h,confirmDelete:f,userToDelete:n,userToAdd:"TPO Admin"}),t.jsx(P,{show:u,close:h,header:"Confirmation",body:`Do you want to delete ${n}?`,btn:"Delete",confirmAction:f})]})}export{J as default};
