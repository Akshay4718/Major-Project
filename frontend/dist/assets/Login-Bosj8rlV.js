import{u as S,r as s,j as e,L as v,b as E,B as L}from"./index-B7OZzBRK.js";import{C as P}from"./Toast-C-pLTZpU.js";import{i as T}from"./auth.utility-BSlGJMKu.js";import{B as M}from"./Button-5FLJvNMB.js";import"./ThemeProvider-mjo_KbZQ.js";import"./Button-DQAcu0VB.js";function D(){document.title="CPMS | TPO Login";const l=S(),[a,o]=s.useState({}),[c,u]=s.useState(!1),[h,p]=s.useState(!1),[w,b]=s.useState(""),[n,y]=s.useState({email:"",password:""}),{email:i,password:m}=n,[d,j]=s.useState(!1);s.useEffect(()=>{T()&&l("../tpo/dashboard")},[l]);const g=t=>{y({...n,[t.target.name]:t.target.value}),t.target.name==="email"&&o({...a,email:""}),t.target.name==="password"&&o({...a,password:""})},N=async t=>{var x,f;if(t.preventDefault(),!i&&!m)return o({email:"Email Required!",password:"Password Required!"});if(!i)return o({email:"Email Required!"});if(!m)return o({password:"Password Required!"});u(!0);try{const r=await E.post(`${L}/tpo/login`,n);localStorage.setItem("token",r.data.token),l("/tpo/dashboard")}catch(r){(f=(x=r.response)==null?void 0:x.data)!=null&&f.msg&&(b(r.response.data.msg),p(!0)),console.log("Error in TPO login.jsx => ",r),u(!1)}},C=()=>j(!d);return e.jsxs(e.Fragment,{children:[e.jsx(P,{show:h,onClose:()=>p(!1),message:w,delay:3e3,position:"bottom-end"}),e.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-100",children:e.jsxs("form",{className:"flex flex-col items-center gap-5 bg-white border border-gray-300 rounded-lg p-8 shadow-md w-96 max-w-[90%]",onSubmit:N,children:[e.jsxs("div",{className:"flex flex-col items-center gap-3",children:[e.jsx("img",{src:v,alt:"CPMS Logo",className:"w-32 h-32 rounded-lg shadow-sm"}),e.jsx("h1",{className:"text-2xl font-semibold text-gray-800",children:"TPO Log In"})]}),e.jsxs("div",{className:"w-full flex flex-col gap-1",children:[e.jsx("input",{type:"email",name:"email",value:i,onChange:g,placeholder:"Email address",className:"w-full px-4 py-2 rounded border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-100 outline-none",autoComplete:"email"}),a.email&&e.jsx("span",{className:"text-red-500 text-sm ml-1",children:a.email})]}),e.jsxs("div",{className:"w-full flex flex-col gap-1 relative",children:[e.jsx("input",{type:d?"text":"password",name:"password",value:m,onChange:g,placeholder:"Password",className:"w-full px-4 py-2 rounded border border-gray-300 focus:border-blue-500 focus:ring focus:ring-blue-100 outline-none",autoComplete:"current-password"}),e.jsx("i",{className:`absolute right-3 top-2.5 cursor-pointer text-gray-500 ${d?"fa-solid fa-eye":"fa-regular fa-eye-slash"}`,onClick:C}),a.password&&e.jsx("span",{className:"text-red-500 text-sm ml-1",children:a.password})]}),e.jsx(M,{type:"submit",variant:"primary",className:"w-full py-2",disabled:c,children:c?"Loading...":"Log In"}),e.jsxs("p",{className:"text-sm text-gray-700 text-center",children:["Log In as Management?"," ",e.jsx("span",{className:"text-blue-500 font-medium cursor-pointer hover:underline",onClick:()=>l("../management/login"),children:"Click Here"})]}),e.jsx("p",{className:"text-xs text-gray-400 text-center mt-4",children:"Â© College Placement Management System 2025 - 26"})]})})]})}export{D as default};
