import{r as t,b as f,B as y,j as e}from"./index-B7OZzBRK.js";import{r as l,s as w,t as M,u as k,v as C}from"./index-eTNoQcu-.js";function F(){const[n,m]=t.useState([]),[h,x]=t.useState(!0),[u,i]=t.useState(!1),[j,c]=t.useState(""),[r,d]=t.useState("");t.useEffect(()=>{N()},[]);const N=async()=>{try{const s=localStorage.getItem("token"),a=await f.get(`${y}/meeting/student/upcoming`,{headers:{Authorization:`Bearer ${s}`}});a.data.success&&m(a.data.meetings)}catch(s){console.error("Error fetching meetings:",s)}finally{x(!1)}},g=s=>new Date(s).toLocaleString("en-IN",{dateStyle:"full",timeStyle:"short",timeZone:"Asia/Kolkata"}),b=s=>{const o=(new Date(s)-new Date)/(1e3*60);return o<=15&&o>=-30},p=(s,a)=>{c(s),d(a),i(!0)},v=()=>{i(!1),c(""),d("")};return h?e.jsx("div",{className:"container py-5 text-center",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):e.jsxs("div",{className:"container py-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"mb-2",children:[e.jsx(l,{className:"me-2 text-primary"}),"Online Meetings"]}),e.jsx("p",{className:"text-muted",children:"Join scheduled meetings with TPO and recruiters"})]}),e.jsxs("div",{className:"alert alert-info mb-4",children:[e.jsx(w,{className:"me-2"}),e.jsx("strong",{children:"Note:"})," You can join meetings 15 minutes before the scheduled time"]}),e.jsx("div",{className:"row g-3",children:n.length===0?e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card text-center py-5",children:e.jsxs("div",{className:"card-body",children:[e.jsx(l,{size:48,className:"text-muted mb-3"}),e.jsx("h5",{className:"text-muted",children:"No Upcoming Meetings"}),e.jsx("p",{className:"text-muted",children:"You'll receive an email when new meetings are scheduled"})]})})}):n.map(s=>e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"card shadow-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row align-items-center",children:[e.jsxs("div",{className:"col-md-8",children:[e.jsx("h5",{className:"card-title mb-2",children:s.title}),e.jsx("p",{className:"card-text text-muted mb-3",children:s.description}),e.jsxs("div",{className:"d-flex flex-wrap gap-3 text-muted small",children:[e.jsxs("div",{children:[e.jsx(M,{className:"me-2 text-primary"}),g(s.scheduledTime)]}),e.jsxs("div",{children:[e.jsx(k,{className:"me-2 text-primary"}),s.duration," minutes"]}),e.jsxs("div",{children:[e.jsx(C,{className:"me-2 text-primary"}),s.hostName]})]})]}),e.jsx("div",{className:"col-md-4 text-md-end mt-3 mt-md-0",children:b(s.scheduledTime)?e.jsxs("button",{onClick:()=>p(s.meetingLink,s.title),className:"btn btn-success btn-lg",children:[e.jsx(l,{className:"me-2"}),"Join Meeting"]}):e.jsx("button",{className:"btn btn-secondary btn-lg",disabled:!0,children:"Not Yet Available"})})]})})})},s._id))}),u&&e.jsx("div",{className:"modal show d-block",style:{backgroundColor:"rgba(0,0,0,0.7)"},children:e.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",children:e.jsxs("div",{className:"modal-content",style:{backgroundColor:"#1a1a1a"},children:[e.jsxs("div",{className:"modal-header border-0",style:{backgroundColor:"#2d2d2d"},children:[e.jsxs("h5",{className:"modal-title text-white",children:[e.jsx(l,{className:"me-2"}),r]}),e.jsx("button",{type:"button",className:"btn-close btn-close-white",onClick:v,"aria-label":"Close"})]}),e.jsx("div",{className:"modal-body p-0",style:{height:"70vh"},children:e.jsx("iframe",{src:j,title:r,className:"w-100 h-100",style:{border:"none"},allow:"camera; microphone; fullscreen; speaker; display-capture",allowFullScreen:!0})})]})})})]})}export{F as default};
