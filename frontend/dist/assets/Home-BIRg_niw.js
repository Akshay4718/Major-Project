import{r,b as c,B as d,j as e,c as p}from"./index-B7OZzBRK.js";import{N}from"./NoticeBox-CJj5clz9.js";function w(){const[x,m]=r.useState(!0),[s,h]=r.useState([]),[n,f]=r.useState({});r.useEffect(()=>{(async()=>{try{const a=localStorage.getItem("token"),i=await c.get(`${d}/user/detail`,{headers:{Authorization:`Bearer ${a}`}});f({role:i.data.role})}catch(a){console.log("Error fetching user details => ",a)}})()},[]),r.useEffect(()=>{u()},[n==null?void 0:n.role]);const u=async()=>{try{const t=localStorage.getItem("token"),a=await c.get(`${d}/tpo/jobs`,{headers:{Authorization:`Bearer ${t}`}}),i=new Date,g=a.data.data.filter(l=>{if(!l.applicationDeadline)return!0;const o=new Date(l.applicationDeadline);return i<=o});h(g.sort((l,o)=>new Date(o.postedAt)-new Date(l.postedAt)).slice(0,10))}catch(t){console.log("Error while fetching job openings => ",t)}finally{m(!1)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"my-2 mx-2 w-full backdrop-blur-md bg-gradient-to-br from-white/40 to-blue-50/30 border border-blue-200/50 rounded-xl py-3 px-4 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-bell text-blue-600 text-xl animate-pulse"}),e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:"Latest Job Openings"})]}),(s==null?void 0:s.length)>0&&e.jsxs("span",{className:"bg-blue-600 text-white text-xs font-semibold px-2 py-1 rounded-full",children:[s.length," New"]})]}),x?e.jsxs("div",{className:"flex flex-col justify-center items-center h-72 gap-3",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-4xl text-blue-600"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading job notifications..."})]}):e.jsx("div",{className:"relative h-72 overflow-hidden rounded-lg bg-gradient-to-b from-transparent to-white/50",children:(s==null?void 0:s.length)>0?e.jsx("div",{className:"absolute bottom-0 w-full h-full animate-scrollUp",children:s.map((t,a)=>e.jsx(p,{to:`/student/job/${t==null?void 0:t._id}`,target:"_blank",className:"no-underline block mb-3",children:e.jsx("div",{className:"group p-3 bg-white/80 hover:bg-blue-50 border-l-4 border-blue-500 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 transform hover:scale-[1.02]",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:"fa-solid fa-briefcase text-blue-600 text-sm"}),e.jsx("h4",{className:"font-semibold text-gray-800 group-hover:text-blue-600 transition-colors text-sm",children:t==null?void 0:t.jobTitle}),(new Date-new Date(t==null?void 0:t.postedAt))/(1e3*60*60*24)<=2&&e.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white text-xs font-bold px-2 py-0.5 rounded-full animate-pulse",children:"NEW"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("i",{className:"fa-regular fa-clock"}),e.jsx("span",{children:new Date(t==null?void 0:t.postedAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),e.jsx("span",{className:"text-gray-400",children:"â€¢"}),e.jsx("span",{children:new Date(t==null?void 0:t.postedAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx("i",{className:"fa-solid fa-arrow-right text-gray-400 group-hover:text-blue-600 group-hover:translate-x-1 transition-all"})]})})},a))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center px-4",children:[e.jsx("i",{className:"fa-solid fa-inbox text-gray-300 text-5xl mb-3"}),e.jsx("p",{className:"text-gray-500 font-semibold",children:"No Job Notifications"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Check back later for new opportunities!"})]})})]})})}function v(){return document.title="CPMS | Student Dashboard",e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 max-sm:grid-cols-1",children:[e.jsx(w,{}),e.jsx(N,{})]})})}export{v as default};
