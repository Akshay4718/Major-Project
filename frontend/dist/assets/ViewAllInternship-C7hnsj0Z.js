import{u as F,a as O,r as l,b as f,B as u,j as e}from"./index-B7OZzBRK.js";import{T as R}from"./Table-C0LzT_QR.js";import{T as q,O as N,a as p}from"./TablePlaceholder-CtzLlF3u.js";import{M as Y}from"./Modal-BBnWcCLm.js";import{C as G}from"./Toast-C-pLTZpU.js";import"./ThemeProvider-mjo_KbZQ.js";import"./index-DNKZOxsO.js";import"./warning-KWRHVkjh.js";import"./TransitionWrapper-qWTe5h-w.js";import"./useEventCallback-DsMNjBTY.js";import"./Placeholder-DGZdzl_d.js";import"./Col-DXoX1HGj.js";import"./Button-5FLJvNMB.js";import"./Button-DQAcu0VB.js";function de(){document.title="CPMS | My Internships";const h=F(),w=O(),[v,S]=l.useState(!0),[x,D]=l.useState([]),[I,c]=l.useState(!1),[T,m]=l.useState(""),[M,n]=l.useState(!1),[E,A]=l.useState({}),[C,$]=l.useState(""),[d,k]=l.useState({});l.useEffect(()=>{const t=localStorage.getItem("token");f.get(`${u}/user/detail`,{headers:{Authorization:`Bearer ${t}`}}).then(a=>{k({id:a.data.id,email:a.data.email,role:a.data.role})}).catch(a=>{console.log("AddUserTable.jsx => ",a),m(a),c(!0)}),g()},[]);const g=async()=>{var t,a,r,i;try{if(!(d!=null&&d.id))return;const s=await f.get(`${u}/student/internship?studentId=${d==null?void 0:d.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});D(s.data.internships),(t=s==null?void 0:s.data)!=null&&t.msg&&(m((a=s==null?void 0:s.data)==null?void 0:a.msg),c(!0)),S(!1)}catch(s){console.log("Error fetching jobs ",s),(i=(r=s==null?void 0:s.response)==null?void 0:r.data)!=null&&i.msg&&(m(s.response.data.msg),c(!0))}};l.useEffect(()=>{g()},[d==null?void 0:d.id]);const B=(t,a)=>{$(t),A({cmpName:a}),n(!0)},P=async t=>{var a,r,i,s,j,b;try{const o=await f.post(`${u}/student/delete-internship`,{internshipId:t,studentId:d.id},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});n(!1),g(),(a=o==null?void 0:o.data)!=null&&a.msg&&(m((r=o==null?void 0:o.data)==null?void 0:r.msg),c(!0))}catch(o){(s=(i=o==null?void 0:o.response)==null?void 0:i.data)!=null&&s.msg&&(m((b=(j=o==null?void 0:o.response)==null?void 0:j.data)==null?void 0:b.msg),c(!0)),console.log("Error deleting job ",o)}},L=t=>e.jsx(p,{id:"button-tooltip",...t,children:"Edit Internship Detail"}),_=t=>e.jsx(p,{id:"button-tooltip",...t,children:"Delete Internship"}),W=()=>n(!1),{showToastPass:y,toastMessagePass:z}=w.state||{showToastPass:!1,toastMessagePass:""};return l.useEffect(()=>{y&&(m(z),c(y),h(".",{replace:!0,state:{}}))},[]),e.jsx(e.Fragment,{children:e.jsxs(e.Fragment,{children:[e.jsx(G,{show:I,onClose:()=>c(!1),message:T,delay:3e3,position:"bottom-end"}),e.jsx("div",{className:"",children:v?e.jsx(q,{}):e.jsx("div",{className:"overflow-hidden rounded-lg shadow-lg border border-gray-200 my-6",children:e.jsxs(R,{hover:!0,responsive:"sm",className:"mb-0 bg-white text-base max-lg:text-sm",children:[e.jsx("thead",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-sm font-semibold",style:{width:"6%"},children:"Sr. No."}),e.jsx("th",{className:"px-4 py-3 text-sm font-semibold",style:{width:"16%"},children:"Company"}),e.jsx("th",{className:"px-4 py-3 text-sm font-semibold",style:{width:"13%"},children:"Website"}),e.jsx("th",{className:"px-4 py-3 text-sm font-semibold",style:{width:"14%"},children:"Start Date"}),e.jsx("th",{className:"px-4 py-3 text-sm font-semibold",style:{width:"14%"},children:"End Date"}),e.jsx("th",{className:"px-4 py-3 text-sm font-semibold",style:{width:"13%"},children:"Duration"}),e.jsx("th",{className:"px-4 py-3 text-sm font-semibold",style:{width:"11%"},children:"Stipend"}),e.jsx("th",{className:"px-4 py-3 text-sm font-semibold text-center",style:{width:"13%"},children:"Action"})]})}),e.jsx("tbody",{className:"bg-white",children:(x==null?void 0:x.length)>0?x==null?void 0:x.map((t,a)=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-indigo-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:a+1}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-building text-indigo-600 text-xs"}),e.jsx("span",{className:"font-semibold text-gray-800",children:(t==null?void 0:t.companyName)||"-"})]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:t!=null&&t.companyWebsite?e.jsxs("a",{href:t==null?void 0:t.companyWebsite,target:"_blank",className:"no-underline text-indigo-600 hover:text-indigo-800 flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-globe text-xs"}),t==null?void 0:t.companyWebsite]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-regular fa-calendar text-xs text-green-500"}),new Date(t==null?void 0:t.startDate).toLocaleDateString("en-IN")||"-"]})}),e.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-regular fa-calendar text-xs text-red-500"}),new Date(t==null?void 0:t.endDate).toLocaleDateString("en-IN")||"-"]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("span",{className:"inline-flex items-center gap-1 bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-semibold",children:[e.jsx("i",{className:"fa-regular fa-hourglass"}),t!=null&&t.internshipDuration?(t==null?void 0:t.internshipDuration)+" days":"-"]})}),e.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-green-600",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-indian-rupee-sign text-xs"}),(t==null?void 0:t.monthlyStipend)||"-"]})}),e.jsx("td",{className:"px-4 py-3 text-sm",children:e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx(N,{placement:"top",delay:{show:250,hide:400},overlay:L,children:e.jsx("button",{className:"p-2 rounded-lg bg-blue-50 text-blue-600 hover:bg-blue-600 hover:text-white transition-all",onClick:()=>h(`../student/add-internship/${t._id}`),children:e.jsx("i",{className:"fa-solid fa-pen-to-square text-base"})})}),e.jsx(N,{placement:"top",delay:{show:250,hide:400},overlay:_,children:e.jsx("button",{className:"p-2 rounded-lg bg-red-50 text-red-600 hover:bg-red-600 hover:text-white transition-all",onClick:()=>B(t==null?void 0:t._id,t==null?void 0:t.companyName),children:e.jsx("i",{className:"fa-solid fa-trash-can text-base"})})})]})})]},t==null?void 0:t._id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"px-4 py-8 text-center text-gray-500",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-laptop-code text-4xl text-gray-300"}),e.jsx("p",{className:"mb-0 font-medium",children:"No Internships Added Yet!"}),e.jsx("p",{className:"text-xs text-gray-400",children:"Add your internship experience to showcase your skills"})]})})})})]})})}),e.jsx(Y,{show:M,close:W,header:"Confirmation",body:`Do you want to delete internship of ${E.cmpName}?`,btn:"Delete",confirmAction:()=>P(C)})]})})}export{de as default};
