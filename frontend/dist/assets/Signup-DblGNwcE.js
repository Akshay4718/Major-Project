import{u as L,a as _,r,j as e,L as A,b as R,B as M}from"./index-B7OZzBRK.js";import{C as T}from"./Toast-C-pLTZpU.js";import{i as U}from"./auth.utility-BSlGJMKu.js";function D(){var b;document.title="CPMS | Student Sign Up";const n=L(),u=_(),j=((b=u==null?void 0:u.state)==null?void 0:b.prefillEmail)||"";r.useEffect(()=>{U()&&n("../student/dashboard")},[n]);const[N,g]=r.useState(!1),[v,S]=r.useState(""),[t,m]=r.useState({}),[c,C]=r.useState({first_name:"",email:j,number:"",password:""}),{first_name:x,number:o,email:f,password:l}=c,i=s=>{C({...c,[s.target.name]:s.target.value}),s.target.name==="password"&&s.target.value&&!h(s.target.value)?m({...t,password:"Password must be 8+ chars, include uppercase, lowercase, number & special char"}):m({...t,[s.target.name]:""})};function h(s){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/.test(s)}const E=async s=>{var w,y;s.preventDefault();const a={};if(x||(a.first_name="Name Required!"),f||(a.email="Email Required!"),o||(a.number="Number Required!"),l||(a.password="Password Required!"),o&&o.length!==10&&(a.number="Number must be 10 digits!"),l&&!h(l)&&(a.password="Password must be 8+ chars, include uppercase, lowercase, number & special char"),Object.keys(a).length)return m(a);try{await R.post(`${M}/student/signup`,c),n("../student/login",{state:{showToastPass:!0,toastMessagePass:"User Created Successfully! Now You Can Login."}})}catch(p){S(((y=(w=p==null?void 0:p.response)==null?void 0:w.data)==null?void 0:y.msg)||"Something went wrong"),g(!0)}},[d,P]=r.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(T,{show:N,onClose:()=>g(!1),message:v,delay:3e3,position:"bottom-end"}),e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-50 py-6",children:e.jsxs("form",{className:"flex flex-col gap-4 bg-white p-8 rounded-lg shadow-md w-96 max-sm:w-11/12",onSubmit:E,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:A,alt:"Logo",className:"w-24 h-24 mb-4 rounded-lg"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Sign Up as a Student"})]}),e.jsxs("div",{children:[e.jsx("input",{type:"text",name:"first_name",value:x,onChange:i,placeholder:"Name",className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-gray-400"}),t.first_name&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.first_name})]}),e.jsxs("div",{children:[e.jsx("input",{type:"email",name:"email",value:f,onChange:i,placeholder:"Email Address",className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-gray-400"}),t.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.email})]}),e.jsxs("div",{children:[e.jsx("input",{type:"number",name:"number",value:o,onChange:i,placeholder:"Phone Number",className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-gray-400",onInput:s=>s.target.value=s.target.value.slice(0,10)}),t.number&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.number})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:d?"text":"password",name:"password",value:l,onChange:i,placeholder:"Password",className:"w-full px-4 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-gray-400"}),e.jsx("i",{className:`absolute right-3 top-3 cursor-pointer ${d?"fa-solid fa-eye":"fa-regular fa-eye-slash"}`,onClick:()=>P(!d)}),t.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:t.password})]}),e.jsx("button",{type:"submit",className:"w-full bg-gray-800 text-white py-2 rounded-md hover:bg-gray-700 transition",children:"Sign Up"}),e.jsxs("p",{className:"text-center text-gray-600 text-sm",children:["Already have an account?"," ",e.jsx("span",{className:"text-blue-500 cursor-pointer",onClick:()=>n("../student/login"),children:"Login"})]}),e.jsx("p",{className:"text-center text-gray-400 text-xs mt-2",children:"Â© College Placement Management System 2025 - 26"})]})})]})}export{D as default};
