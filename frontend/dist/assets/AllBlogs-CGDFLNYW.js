import{r as l,u as k,b as i,B as c,j as e,c as d}from"./index-B3aSgIEu.js";function B(){document.title="CPMS | Student Blogs";const[x,h]=l.useState([]),[f,u]=l.useState(!0),[o,p]=l.useState("All"),[n,y]=l.useState(""),[r,j]=l.useState(null);k();const b=["All","Interview Experience","Resource Sharing","Tips & Tricks","Career Advice","Other"];l.useEffect(()=>{N(),g()},[o,n]);const N=async()=>{try{const t=localStorage.getItem("token"),s=await i.get(`${c}/user/detail`,{headers:{Authorization:`Bearer ${t}`}});j(s.data)}catch(t){console.error("Error fetching user:",t)}},g=async()=>{try{const t=localStorage.getItem("token"),s={};o!=="All"&&(s.category=o),n&&(s.search=n);const a=await i.get(`${c}/blog/all`,{headers:{Authorization:`Bearer ${t}`},params:s});h(a.data.blogs)}catch(t){console.error("Error fetching blogs:",t)}finally{u(!1)}},v=async t=>{try{const s=localStorage.getItem("token");await i.post(`${c}/blog/${t}/like`,{},{headers:{Authorization:`Bearer ${s}`}}),g()}catch(s){console.error("Error liking blog:",s)}},w=t=>({"Interview Experience":"bg-blue-100 text-blue-700","Resource Sharing":"bg-green-100 text-green-700","Tips & Tricks":"bg-purple-100 text-purple-700","Career Advice":"bg-orange-100 text-orange-700",Other:"bg-gray-100 text-gray-700"})[t]||"bg-gray-100 text-gray-700",S=t=>{const s=Math.floor((new Date-new Date(t))/1e3);let a=s/31536e3;return a>1?Math.floor(a)+" years ago":(a=s/2592e3,a>1?Math.floor(a)+" months ago":(a=s/86400,a>1?Math.floor(a)+" days ago":(a=s/3600,a>1?Math.floor(a)+" hours ago":(a=s/60,a>1?Math.floor(a)+" minutes ago":"Just now"))))};return f?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-4xl text-indigo-600"})}):e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 flex items-center gap-3",children:[e.jsx("i",{className:"fa-solid fa-blog text-indigo-600"}),"Student Blogs"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Share your experiences and learn from others"})]}),e.jsx(d,{to:"/student/create-blog",children:e.jsxs("button",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:shadow-lg transition-all flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-plus"}),"Create Blog"]})})]}),e.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:b.map(t=>e.jsx("button",{onClick:()=>p(t),className:`px-4 py-2 rounded-full text-sm font-medium transition-all ${o===t?"bg-indigo-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:t},t))})}),e.jsxs("div",{className:"relative md:w-80",children:[e.jsx("input",{type:"text",placeholder:"Search blogs...",value:n,onChange:t=>y(t.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 rounded-lg focus:outline-none focus:border-indigo-500"}),e.jsx("i",{className:"fa-solid fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"})]})]}),x.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(t=>{var s,a,m;return e.jsxs("div",{className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-all overflow-hidden border border-gray-200",children:[e.jsx("div",{className:"p-4 pb-2",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-xs font-semibold ${w(t.category)}`,children:[e.jsx("i",{className:"fa-solid fa-tag"}),t.category]})}),e.jsx(d,{to:`/student/blog/${t._id}`,className:"no-underline",children:e.jsxs("div",{className:"px-4 pb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2 hover:text-indigo-600 transition-colors line-clamp-2",children:t.title}),e.jsx("p",{className:"text-gray-600 text-sm line-clamp-3 mb-3",children:t.content}),t.companyName&&e.jsxs("div",{className:"flex items-center gap-1 text-sm text-indigo-600 mb-2",children:[e.jsx("i",{className:"fa-solid fa-building text-xs"}),e.jsx("span",{className:"font-medium",children:t.companyName})]})]})}),e.jsxs("div",{className:"px-4 py-3 bg-gray-50 border-t border-gray-200 flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:((s=t.author)==null?void 0:s.profile)||"/default-avatar.png",alt:t.authorName,className:"w-8 h-8 rounded-full object-cover"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-800",children:t.authorName}),e.jsx("p",{className:"text-xs text-gray-500",children:S(t.createdAt)})]})]})}),e.jsxs("button",{onClick:()=>v(t._id),className:`flex items-center gap-1 px-3 py-1 rounded-full transition-all ${(a=t.likes)!=null&&a.includes(r==null?void 0:r.id)?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600 hover:bg-red-50 hover:text-red-600"}`,children:[e.jsx("i",{className:`${(m=t.likes)!=null&&m.includes(r==null?void 0:r.id)?"fa-solid":"fa-regular"} fa-heart`}),e.jsx("span",{className:"text-sm font-semibold",children:t.likesCount||0})]})]})]},t._id)})}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("i",{className:"fa-solid fa-inbox text-6xl text-gray-300 mb-4"}),e.jsx("p",{className:"text-xl text-gray-600 font-medium",children:"No blogs found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Be the first to share your experience!"}),e.jsx(d,{to:"/student/create-blog",children:e.jsx("button",{className:"bg-indigo-600 text-white px-6 py-2 rounded-lg hover:bg-indigo-700",children:"Create First Blog"})})]})]})}export{B as default};
