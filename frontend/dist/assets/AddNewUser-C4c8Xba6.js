import{a as C,r as i,j as e,b as u,B as h}from"./index-B7OZzBRK.js";import{C as A}from"./Toast-C-pLTZpU.js";import{M}from"./Modal-BBnWcCLm.js";import{a as d,F as g}from"./Form-DvNwCsSx.js";import"./ThemeProvider-mjo_KbZQ.js";import"./index-DNKZOxsO.js";import"./warning-KWRHVkjh.js";import"./Col-DXoX1HGj.js";function I(){document.title="CPMS | Add new user";const n=C().pathname.split("/").filter(t=>t!==""&&t!=="admin"&&t!=="management")[0].split("-").filter(t=>t!=="add"&&t!=="admin")[0],[s,o]=i.useState({first_name:"",email:"",number:""}),[l,f]=i.useState({}),[p,m]=i.useState(!1),[j,c]=i.useState(""),[b,r]=i.useState(!1),N=()=>r(!1),x=t=>o({...s,[t.target.name]:t.target.value}),w=t=>{t.preventDefault();let a={};if(s!=null&&s.first_name||(a.first_name="Name Required!"),s!=null&&s.email||(a.email="Email Required!"),s!=null&&s.number||(a.number="Number Required!"),Object.keys(a).length>0)return f(a);r(!0)},v=async()=>{var t;try{const a=await u.post(`${h}/management/add-management`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a!=null&&a.data&&(c((t=a==null?void 0:a.data)==null?void 0:t.msg),m(!0),o({first_name:"",email:"",number:""}))}catch(a){console.log("handleSubmit => AddManagement.jsx ==> ",a)}r(!1)},S=async()=>{var t;try{const a=await u.post(`${h}/management/addtpo`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a!=null&&a.data&&(c((t=a==null?void 0:a.data)==null?void 0:t.msg),m(!0),o({first_name:"",email:"",number:""}))}catch(a){console.log("handleSubmit => AddTPO.jsx ==> ",a)}r(!1)},y=async()=>{var t;try{const a=await u.post(`${h}/management/add-student`,s,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a!=null&&a.data&&(c((t=a==null?void 0:a.data)==null?void 0:t.msg),m(!0),o({first_name:"",email:"",number:""}))}catch(a){console.log("handleSubmit => AddStudent.jsx ==> ",a)}r(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(A,{show:p,onClose:()=>m(!1),message:j,delay:3e3,position:"top-center"}),e.jsx("div",{className:"bg-gradient-to-r from-slate-600 via-gray-600 to-slate-700 text-white rounded-xl shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-full",children:e.jsx("i",{className:`text-3xl ${n==="management"?"fa-solid fa-user-tie":n==="tpo"?"fa-solid fa-user-gear":"fa-solid fa-user-graduate"}`})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Add New ",n==="tpo"?"TPO":n==="management"?"Management":"Student"]}),e.jsx("p",{className:"text-slate-100 text-sm mt-1",children:"Create a new user account with email notification"})]})]})}),e.jsx("div",{className:"flex justify-center text-base max-sm:text-sm",children:e.jsxs("div",{className:"bg-white/95 border-2 border-slate-200 rounded-xl p-8 shadow-lg w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"p-2 bg-slate-100 rounded-lg",children:e.jsx("i",{className:"fa-solid fa-user-plus text-slate-600 text-xl"})}),e.jsx("h3",{className:"text-xl font-bold text-slate-800",children:"User Details"})]}),e.jsxs(d,{onSubmit:w,className:"flex flex-col",children:[e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"grid grid-cols-1 gap-x-3 gap-y-6 max-sm:grid-cols-1 max-sm:gap-x-1 max-sm:gap-y-1",children:[e.jsxs("div",{className:"",children:[e.jsx(g,{label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(d.Control,{type:"text",autoComplete:"name",placeholder:"Name",name:"first_name",value:s.first_name||"",onChange:x})}),e.jsx("span",{className:"text-red-500",children:l==null?void 0:l.first_name})]}),e.jsxs("div",{className:"",children:[e.jsx(g,{label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Email ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(d.Control,{type:"email",autoComplete:"email",placeholder:"Email",name:"email",value:s.email||"",onChange:x})}),e.jsx("span",{className:"text-red-500",children:l==null?void 0:l.email})]}),e.jsxs("div",{className:"",children:[e.jsx(g,{label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Number ",e.jsx("span",{className:"text-red-500",children:"*"})]})}),children:e.jsx(d.Control,{type:"number",autoComplete:"number",placeholder:"Phone Number",name:"number",value:s.number||"",onInput:t=>{t.target.value.length>10&&(t.target.value=t.target.value.slice(0,10))},onChange:x})}),e.jsx("span",{className:"text-red-500",children:l==null?void 0:l.number})]})]}),e.jsxs("p",{className:"text-wrap",children:[e.jsx("span",{className:"text-red-500",children:"Note: "}),"Password will be randomly generated & send to user via mail."]})]}),e.jsx("div",{className:"flex justify-center gap-3 mt-4",children:e.jsxs("button",{type:"submit",className:"px-6 py-3 bg-gradient-to-r from-slate-600 to-gray-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg hover:scale-105 transition-all duration-300 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user-plus"}),"Create User"]})})]})]})}),e.jsx(M,{show:b,close:N,header:"Confirmation",body:`Do you want to create new user and send email to ${s==null?void 0:s.email} about creation of user?`,btn:"Create",confirmAction:n==="management"?v:n==="tpo"?S:n==="student"?y:""})]})}export{I as default};
