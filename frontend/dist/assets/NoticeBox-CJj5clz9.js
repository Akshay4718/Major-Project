import{r as o,b as n,B as d,j as e,c as r}from"./index-B7OZzBRK.js";function p(){const[m,x]=o.useState(!0),[l,c]=o.useState([]),[t,g]=o.useState({});o.useEffect(()=>{(async()=>{try{const s=localStorage.getItem("token"),i=await n.get(`${d}/user/detail`,{headers:{Authorization:`Bearer ${s}`}});g({role:i.data.role})}catch(s){console.log("Error fetching user details => ",s)}})()},[]),o.useEffect(()=>{t!=null&&t.role&&h()},[t==null?void 0:t.role]);const h=async()=>{try{const a=await n.get(`${d}/management/get-all-notices`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});let s=[];(t==null?void 0:t.role)==="management_admin"?s=a.data.filter(i=>i.sender_role==="tpo_admin"):(t==null?void 0:t.role)==="tpo_admin"?s=a.data.filter(i=>i.receiver_role==="tpo_admin"):(t==null?void 0:t.role)==="student"&&(s=a.data.filter(i=>i.receiver_role==="student")),c(s)}catch(a){console.log("Error while fetching notices => ",a)}finally{x(!1)}};return e.jsxs("div",{className:"my-2 mx-2 w-full backdrop-blur-md bg-gradient-to-br from-white/40 to-indigo-50/30 border border-indigo-200/50 rounded-xl py-3 px-4 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-bullhorn text-indigo-600 text-xl animate-pulse"}),e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:"Notice Board"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[(l==null?void 0:l.length)>0&&e.jsxs("span",{className:"bg-indigo-600 text-white text-xs font-semibold px-2 py-1 rounded-full",children:[l.length," ",l.length===1?"Notice":"Notices"]}),(t==null?void 0:t.role)==="student"&&e.jsx(r,{to:"/student/all-notice",className:"text-indigo-600 hover:text-indigo-800 text-sm font-semibold transition-colors",children:"View All →"}),(t==null?void 0:t.role)==="tpo_admin"&&e.jsx(r,{to:"/tpo/all-notice",className:"text-indigo-600 hover:text-indigo-800 text-sm font-semibold transition-colors",children:"View All →"}),(t==null?void 0:t.role)==="management_admin"&&e.jsx(r,{to:"/management/all-notice",className:"text-indigo-600 hover:text-indigo-800 text-sm font-semibold transition-colors",children:"View All →"})]})]}),m?e.jsxs("div",{className:"flex flex-col justify-center items-center h-72 gap-3",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-4xl text-indigo-600"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading notices..."})]}):e.jsx("div",{className:"relative h-72 overflow-hidden rounded-lg bg-gradient-to-b from-transparent to-white/50",children:(l==null?void 0:l.length)>0?e.jsx("div",{className:"absolute bottom-0 w-full h-full animate-scrollUp",children:l.map((a,s)=>{const i=(new Date-new Date(a==null?void 0:a.createdAt))/864e5<=2;return e.jsx(r,{to:(t==null?void 0:t.role)==="student"?`/student/notice/${a==null?void 0:a._id}`:(t==null?void 0:t.role)==="tpo_admin"?`/tpo/notice/${a==null?void 0:a._id}`:t.role==="management_admin"?`/management/notice/${a==null?void 0:a._id}`:"",target:"_blank",className:"no-underline block mb-3",children:e.jsx("div",{className:"group p-3 bg-white/80 hover:bg-indigo-50 border-l-4 border-indigo-500 rounded-lg shadow-sm hover:shadow-md transition-all duration-300 transform hover:scale-[1.02]",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:"fa-solid fa-file-lines text-indigo-600 text-sm"}),e.jsx("h4",{className:"font-semibold text-gray-800 group-hover:text-indigo-600 transition-colors text-sm line-clamp-1",children:a==null?void 0:a.title}),i&&e.jsx("span",{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white text-xs font-bold px-2 py-0.5 rounded-full animate-pulse",children:"NEW"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("i",{className:"fa-regular fa-clock"}),e.jsx("span",{children:new Date(a==null?void 0:a.createdAt).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric"})}),e.jsx("span",{className:"text-gray-400",children:"•"}),e.jsx("span",{children:new Date(a==null?void 0:a.createdAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})]})]}),e.jsx("i",{className:"fa-solid fa-arrow-right text-gray-400 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})})},s)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center px-4",children:[e.jsx("i",{className:"fa-solid fa-inbox text-gray-300 text-5xl mb-3"}),e.jsx("p",{className:"text-gray-500 font-semibold",children:"No Notices Available"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Check back later for updates!"})]})})]})}export{p as N};
