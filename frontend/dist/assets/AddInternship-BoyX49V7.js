import{r as i,d as H,u as O,j as e,b as j,B as b}from"./index-B3aSgIEu.js";import{F as d,a as c}from"./Form-D7tsfd2t.js";import{C as R}from"./Toast-DNXJp6MA.js";import{M as z}from"./Modal-y_Bwdyn3.js";import"./ThemeProvider-COntGE-K.js";import"./index-_BQgUFlf.js";import"./warning-Bnkvw9rZ.js";import"./Col-Cd-x-5D5.js";function V(){document.title="CPMS | Add Internships";const[F,C]=i.useState(!0),{internshipId:u}=H(),I=O(),[A,h]=i.useState(!1),[M,m]=i.useState(""),[T,f]=i.useState(!1),[S,v]=i.useState(""),k=()=>f(!1),[t,N]=i.useState({}),[o,$]=i.useState("");i.useEffect(()=>{(async()=>{try{const l=localStorage.getItem("token"),p=await j.get(`${b}/user/detail`,{headers:{Authorization:`Bearer ${l}`}});$({id:p.data.id}),u||C(!1)}catch(l){console.log("addinternship.jsx => ",l)}})()},[]);const E=async()=>{var n,l,p,x,g,y;try{if(!(o!=null&&o.id)||!u)return;const s=await j.get(`${b}/student/internship?studentId=${o==null?void 0:o.id}&internshipId=${u}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});N(s.data.internship),v(s.data.internship.companyName),(n=s==null?void 0:s.data)!=null&&n.msg&&(m((l=s==null?void 0:s.data)==null?void 0:l.msg),h(!0))}catch(s){console.log("error while updating internship ",s),(x=(p=s.response)==null?void 0:p.data)!=null&&x.msg?m((y=(g=s==null?void 0:s.response)==null?void 0:g.data)==null?void 0:y.msg):m("Error while updating internship please try again later!"),h(!0)}finally{C(!1)}},r=n=>{N({...t,[n.target.name]:n.target.value}),n.target.name==="companyName"&&v(n.target.value)},w=n=>!n||n==="undefined"?"":new Date(n).toISOString().split("T")[0],B=()=>{if(!(t!=null&&t.companyName)||!(t!=null&&t.internshipDuration)||!(t!=null&&t.startDate)||!(t!=null&&t.type)){m("Star Marked Required!"),h(!0);return}f(!0)},P=async()=>{var n,l,p,x,g,y,s,D;try{const a=await j.post(`${b}/student/update-internship?studentId=${o==null?void 0:o.id}&internshipId=${u}`,{internship:t},{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if((n=a==null?void 0:a.data)!=null&&n.msg&&(m((l=a==null?void 0:a.data)==null?void 0:l.msg),h(!0),((p=a==null?void 0:a.data)==null?void 0:p.msg)==="Internship Updated Successfully!")){const W={showToastPass:!0,toastMessagePass:(x=a==null?void 0:a.data)==null?void 0:x.msg};I("/student/internship",{state:W})}}catch(a){console.log("error while updating internship ",a),(y=(g=a.response)==null?void 0:g.data)!=null&&y.msg?m((D=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:D.msg):m("Error while updating internship please try again later!"),h(!0)}f(!1)};return i.useEffect(()=>{E()},[o==null?void 0:o.id]),e.jsxs(e.Fragment,{children:[e.jsx(R,{show:A,onClose:()=>h(!1),message:M,delay:3e3,position:"bottom-end"}),F?e.jsx("div",{className:"flex justify-center h-72 items-center",children:e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-3xl"})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"my-8 backdrop-blur-md bg-white/90 border-2 border-blue-200 rounded-xl shadow-lg hover:shadow-xl transition-shadow duration-300 p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:e.jsx("i",{className:"fa-solid fa-briefcase text-blue-600 text-2xl"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Add Internship Experience"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Fill in your internship details below"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 max-sm:grid-cols-1",children:[e.jsx(d,{controlId:"floatingCompanyName",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Company Name ",e.jsx("span",{style:{color:"red"},children:"*"})]})}),children:e.jsx(c.Control,{type:"text",placeholder:"Company Name",name:"companyName",value:(t==null?void 0:t.companyName)||"",onChange:r})}),e.jsx(d,{controlId:"floatingCompanyWebsite",label:"Company Website",children:e.jsx(c.Control,{type:"link",placeholder:"Company Website",name:"companyWebsite",value:(t==null?void 0:t.companyWebsite)||"",onChange:r})}),e.jsx(d,{controlId:"floatingInternshipDuration",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Internship Duration In Days ",e.jsx("span",{style:{color:"red"},children:"*"})]})}),children:e.jsx(c.Control,{type:"number",step:1,placeholder:"Internship Duration",name:"internshipDuration",value:(t==null?void 0:t.internshipDuration)||"",onChange:r})}),e.jsx(d,{controlId:"floatingMonthlyStipend",label:"Monthly Stipend in Rupees",children:e.jsx(c.Control,{type:"number",step:500,placeholder:"Monthly Stipend in Rupees",name:"monthlyStipend",value:(t==null?void 0:t.monthlyStipend)||"",onChange:r})}),e.jsx(d,{controlId:"floatingStartDate",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Internship Start Date ",e.jsx("span",{style:{color:"red"},children:"*"})]})}),children:e.jsx(c.Control,{type:"date",placeholder:"Internship Start Date",name:"startDate",value:w(t==null?void 0:t.startDate)||"",onChange:r})}),e.jsx(d,{controlId:"floatingEndDate",label:"End Date",children:e.jsx(c.Control,{type:"date",placeholder:"Internship End Date",name:"endDate",value:w(t==null?void 0:t.endDate)||"",onChange:r})}),e.jsx(d,{controlId:"floatingSelectType",label:e.jsx(e.Fragment,{children:e.jsxs("span",{children:["Select Internship Type ",e.jsx("span",{style:{color:"red"},children:"*"})]})}),children:e.jsxs(c.Select,{"aria-label":"Floating label select internship type",className:"cursor-pointer",name:"type",value:(t==null?void 0:t.type)||"undefined",onChange:r,children:[e.jsx("option",{disabled:!0,value:"undefined",className:"text-gray-400",children:"Select Internship Type"}),e.jsx("option",{value:"Full Time",children:"Full Time"}),e.jsx("option",{value:"Part Time",children:"Part Time"}),e.jsx("option",{value:"On-Site",children:"On-Site"}),e.jsx("option",{value:"Work From Home",children:"Work From Home"}),e.jsx("option",{value:"Other",children:"Other"})]})}),e.jsx(d,{controlId:"floatingCompanyAddress",label:"Company Address",children:e.jsx(c.Control,{as:"textarea",placeholder:"Company Address",name:"companyAddress",style:{maxHeight:"200px"},value:(t==null?void 0:t.companyAddress)||"",onChange:r})}),e.jsx("div",{className:"col-span-2 max-sm:col-span-1",children:e.jsx(d,{controlId:"floatingDescription",label:"Internship Description",children:e.jsx(c.Control,{as:"textarea",placeholder:"Internship Description",name:"description",style:{maxHeight:"350px",minHeight:"150px"},value:(t==null?void 0:t.description)||"",onChange:r})})})]})]}),e.jsxs("div",{className:"flex justify-center items-center gap-4 mt-6",children:[e.jsxs("button",{type:"button",onClick:B,className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl hover:scale-105 transition-all duration-300 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-floppy-disk"}),u?"Update Internship":"Add Internship"]}),e.jsxs("button",{type:"button",onClick:()=>I(-1),className:"px-8 py-3 bg-gray-200 text-gray-700 font-semibold rounded-lg shadow hover:bg-gray-300 transition-colors duration-300 flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-xmark"}),"Cancel"]})]})]}),e.jsx(z,{show:T,close:k,header:"Confirmation",body:`Do you add internship ${S?`of ${S}`:""}?`,btn:"Update",confirmAction:P})]})}export{V as default};
