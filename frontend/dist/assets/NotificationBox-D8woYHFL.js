import{r as i,b as c,B as m,j as e,c as x}from"./index-B7OZzBRK.js";function b(){const[p,g]=i.useState(!0),[r,h]=i.useState([]),[t,f]=i.useState({});i.useEffect(()=>{(async()=>{try{const l=localStorage.getItem("token"),a=await c.get(`${m}/user/detail`,{headers:{Authorization:`Bearer ${l}`}});f({role:a.data.role})}catch(l){console.log("Error fetching user details => ",l)}})()},[]),i.useEffect(()=>{u()},[t==null?void 0:t.role]);const u=async()=>{var s;try{const l=await c.get(`${m}/tpo/recent-placements`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}),d=(((s=l==null?void 0:l.data)==null?void 0:s.placements)||[]).flatMap(n=>n.placedStudents.map(o=>({id:o.studentId,studentName:o.name,usn:o.usn,department:o.department,jobs:[{jobId:n.jobId,jobTitle:n.jobTitle,companyName:n.company.name,companyLocation:n.company.location,salary:n.salary,status:"placed",placedAt:o.placedAt}]})));h(d)}catch(l){console.log("Error while fetching placement updates: ",l)}finally{g(!1)}};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"my-2 mx-2 w-full backdrop-blur-md bg-gradient-to-br from-white/40 to-purple-50/30 border border-purple-200/50 rounded-xl py-3 px-4 shadow-lg hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-users text-purple-600 text-xl animate-pulse"}),e.jsx("h3",{className:"font-bold text-gray-800 text-lg",children:"Student Placement Updates"})]}),(r==null?void 0:r.length)>0&&e.jsxs("span",{className:"bg-purple-600 text-white text-xs font-semibold px-2 py-1 rounded-full",children:[r.length," Updates"]})]}),p?e.jsxs("div",{className:"flex flex-col justify-center items-center h-72 gap-3",children:[e.jsx("i",{className:"fa-solid fa-spinner fa-spin text-4xl text-purple-600"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Loading placement updates..."})]}):e.jsx("div",{className:"relative h-72 overflow-hidden rounded-lg bg-gradient-to-b from-transparent to-white/50",children:(r==null?void 0:r.length)>0?e.jsx("div",{className:"absolute bottom-0 w-full flex flex-col gap-3 h-full animate-scrollUp",children:r.map((s,l)=>e.jsx(x,{className:"no-underline block",to:(t==null?void 0:t.role)==="tpo_admin"?`/tpo/user/${s.id}`:(t==null?void 0:t.role)==="management_admin"?`/management/user/${s.id}`:"#",target:"_blank",children:e.jsxs("div",{className:"group p-4 bg-gradient-to-r from-amber-50 to-orange-50 hover:from-amber-100 hover:to-orange-100 border-l-4 border-orange-500 rounded-xl shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-[1.01]",children:[e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("div",{className:"bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm",children:s.studentName.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-base font-bold text-gray-800 mb-0",children:s.studentName}),e.jsxs("p",{className:"text-xs text-gray-600 mb-0",children:[e.jsx("span",{className:"font-semibold",children:s.usn}),e.jsx("span",{className:"mx-1",children:"â€¢"}),e.jsx("span",{children:s.department})]})]})]}),e.jsx("i",{className:"fa-solid fa-arrow-right text-gray-400 group-hover:text-orange-600 group-hover:translate-x-1 transition-all"})]}),e.jsx("div",{className:"flex flex-col gap-2 mt-3 pl-10",children:s.jobs.map((a,d)=>e.jsx(x,{className:"no-underline block",to:(t==null?void 0:t.role)==="tpo_admin"?`/tpo/job/${a==null?void 0:a.jobId}`:(t==null?void 0:t.role)==="management_admin"?`/management/job/${a==null?void 0:a.jobId}`:"#",target:"_blank",onClick:n=>n.stopPropagation(),children:e.jsxs("div",{className:"group/job p-2 bg-white/70 hover:bg-white rounded-lg border border-orange-200 hover:border-orange-400 transition-all",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("i",{className:"fa-solid fa-building text-orange-600 text-xs"}),e.jsx("span",{className:"font-semibold text-gray-800 text-sm group-hover/job:text-orange-600 transition-colors",children:a==null?void 0:a.jobTitle}),e.jsx("span",{className:"text-gray-400 text-xs",children:"at"}),e.jsx("span",{className:"text-gray-700 text-sm font-medium",children:a==null?void 0:a.companyName})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"bg-green-100 text-green-700 text-xs font-semibold px-2 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-trophy"}),"Placed"]}),(a==null?void 0:a.salary)&&e.jsxs("span",{className:"bg-blue-100 text-blue-700 text-xs font-semibold px-2 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx("i",{className:"fa-solid fa-indian-rupee-sign"}),a.salary," LPA"]})]})]})},d))})]})},l))}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center px-4",children:[e.jsx("i",{className:"fa-solid fa-user-check text-gray-300 text-5xl mb-3"}),e.jsx("p",{className:"text-gray-500 font-semibold",children:"No Placement Updates"}),e.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Student placement activities will appear here"})]})})]})})}export{b as N};
